{"file":"export-to-figma2.js","mappings":"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","names":[],"sources":["./src/components/export-to-figma/lib/functions/isHidden.ts","./src/components/export-to-figma/lib/functions/defaults.ts","./src/components/export-to-figma/lib/functions/pick.ts","./src/components/export-to-figma/lib/functions/getAppliedComputedStyles.ts","./src/components/export-to-figma/lib/functions/size.ts","./src/components/export-to-figma/lib/functions/getDirectionOfMostElements.ts","./src/components/export-to-figma/lib/functions/getAggregateRectOfElements.ts","./src/components/export-to-figma/lib/functions/getBoundingClientRect.ts","./src/components/export-to-figma/lib/functions/getRgb.ts","./src/components/export-to-figma/lib/functions/capitalize.ts","./src/components/export-to-figma/lib/functions/getUrl.ts","./src/components/export-to-figma/lib/functions/isLength.ts","./src/components/export-to-figma/lib/functions/toNum.ts","./src/components/export-to-figma/lib/functions/parseValue.ts","./src/components/export-to-figma/lib/functions/parseUnits.ts","./src/components/export-to-figma/lib/functions/textNodesUnder.ts","./src/components/export-to-figma/lib/functions/hasChildren.ts","./src/components/export-to-figma/lib/functions/traverse.ts","./src/components/export-to-figma/lib/functions/getParents.ts","./src/components/export-to-figma/lib/functions/getDepth.ts","./src/components/export-to-figma/lib/functions/getParent.ts","./src/components/export-to-figma/lib/functions/makeTree.ts","./src/components/export-to-figma/lib/functions/setData.ts","./src/components/export-to-figma/lib/functions/addConstraints.ts","./src/components/export-to-figma/lib/functions/removeRefs.ts","./src/components/export-to-figma/lib/html-to-figma.ts","./src/components/export-to-figma/export-to-figma.tsx"],"sourcesContent":["export const isHidden = (element: Element) => {\n\tlet el: Element | null = element;\n\tdo {\n\t\tconst computed = getComputedStyle(el);\n\t\tif (\n\t\t\t// computed.opacity === '0' ||\n\t\t\tcomputed.display === \"none\" ||\n\t\t\tcomputed.visibility === \"hidden\"\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\t// Some sites hide things by having overflow: hidden and height: 0, e.g. dropdown menus that animate height in\n\t\tif (\n\t\t\tcomputed.overflow !== \"visible\" &&\n\t\t\tel.getBoundingClientRect().height < 1\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t} while ((el = el.parentElement));\n\treturn false;\n}","export const defaults: any = (color) => {\n\treturn {\n\t\ttransform: \"none\",\n\t\topacity: \"1\",\n\t\tborderRadius: \"0px\",\n\t\tbackgroundImage: \"none\",\n\t\tbackgroundPosition: \"0% 0%\",\n\t\tbackgroundSize: \"auto\",\n\t\tbackgroundColor: \"rgba(0, 0, 0, 0)\",\n\t\tbackgroundAttachment: \"scroll\",\n\t\tborder: \"0px none \" + color,\n\t\tborderTop: \"0px none \" + color,\n\t\tborderBottom: \"0px none \" + color,\n\t\tborderLeft: \"0px none \" + color,\n\t\tborderRight: \"0px none \" + color,\n\t\tborderWidth: \"0px\",\n\t\tborderColor: color,\n\t\tborderStyle: \"none\",\n\t\tboxShadow: \"none\",\n\t\tfontWeight: \"400\",\n\t\ttextAlign: \"start\",\n\t\tjustifyContent: \"normal\",\n\t\talignItems: \"normal\",\n\t\talignSelf: \"auto\",\n\t\tflexGrow: \"0\",\n\t\ttextDecoration: \"none solid \" + color,\n\t\tlineHeight: \"normal\",\n\t\tletterSpacing: \"normal\",\n\t\tbackgroundRepeat: \"repeat\",\n\t\tzIndex: \"auto\" // TODO\n\t}\n};","import { defaults } from \"./defaults\";\n\nexport const pick = (object: any, paths: any[], color) => {\n\tconst newObject: any = {};\n\n\tpaths.forEach(path => {\n\t\tif (object[path]) {\n\t\t\tif (object[path] !== defaults(color)[path]) {\n\t\t\t\tnewObject[path] = object[path];\n\t\t\t}\n\t\t}\n\t});\n\n\treturn newObject;\n}","import { pick } from \"./pick\";\n\nexport const getAppliedComputedStyles = (element: Element, pseudo?: string): { [key: string]: string } => {\n\tif (!(element instanceof HTMLElement || element instanceof SVGElement)) {\n\t\treturn {};\n\t}\n\n\tconst styles = getComputedStyle(element, pseudo);\n\n\tconst list: (keyof React.CSSProperties)[] = [\n\t\t\"opacity\",\n\t\t\"backgroundColor\",\n\t\t\"border\",\n\t\t\"borderTop\",\n\t\t\"borderLeft\",\n\t\t\"borderRight\",\n\t\t\"borderBottom\",\n\t\t\"borderRadius\",\n\t\t\"backgroundImage\",\n\t\t\"borderColor\",\n\t\t\"boxShadow\"\n\t];\n\n\tconst color = styles.color;\n\n\treturn pick(styles, list as any, color) as any;\n}","export const size = (obj: object) => {\n\treturn Object.keys(obj).length;\n}","import { getBoundingClientRect } from \"./getBoundingClientRect\";\n\nexport const getDirectionMostOfElements = (direction: \"left\" | \"right\" | \"top\" | \"bottom\", elements: Element[]) => {\n\tif (elements.length === 1) {\n\t\treturn elements[0];\n\t}\n\treturn elements.reduce(\n\t\t(memo, value: Element) => {\n\t\t\tif (!memo) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (direction === \"left\" || direction === \"top\") {\n\t\t\t\tif (\n\t\t\t\t\tgetBoundingClientRect(value)[direction] <\n\t\t\t\t\tgetBoundingClientRect(memo)[direction]\n\t\t\t\t) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tgetBoundingClientRect(value)[direction] >\n\t\t\t\t\tgetBoundingClientRect(memo)[direction]\n\t\t\t\t) {\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn memo;\n\t\t},\n\t\tnull as Element | null\n\t);\n}","import { getBoundingClientRect } from \"./getBoundingClientRect\";\nimport { getDirectionMostOfElements } from \"./getDirectionOfMostElements\";\n\nexport const getAggregateRectOfElements = (elements: Element[]) => {\n\tif (!elements.length) {\n\t\treturn null;\n\t}\n\n\tconst top = getBoundingClientRect(\n\t\tgetDirectionMostOfElements(\"top\", elements)!\n\t).top;\n\tconst left = getBoundingClientRect(\n\t\tgetDirectionMostOfElements(\"left\", elements)!\n\t).left;\n\tconst bottom = getBoundingClientRect(\n\t\tgetDirectionMostOfElements(\"bottom\", elements)!\n\t).bottom;\n\tconst right = getBoundingClientRect(\n\t\tgetDirectionMostOfElements(\"right\", elements)!\n\t).right;\n\tconst width = right - left;\n\tconst height = bottom - top;\n\treturn {\n\t\ttop,\n\t\tleft,\n\t\tbottom,\n\t\tright,\n\t\twidth,\n\t\theight\n\t};\n}","import { getAggregateRectOfElements } from \"./getAggregateRectOfElements\";\n\nexport const getBoundingClientRect = (el: Element): ClientRect => {\n\tconst computed = getComputedStyle(el);\n\tconst display = computed.display;\n\n\tif (display && display.includes(\"inline\") && el.children.length) {\n\t\tconst elRect = el.getBoundingClientRect();\n\t\tconst aggregateRect = getAggregateRectOfElements(\n\t\t\tArray.from(el.children)\n\t\t)!;\n\n\t\treturn {\n\t\t\t...aggregateRect,\n\t\t\theight: elRect.height,\n\t\t\twidth: elRect.width,\n\t\t\ttop: elRect.top,\n\t\t\tbottom: elRect.bottom,\n\t\t\tleft: elRect.left,\n\t\t\tright: elRect.right\n\t\t};\n\t}\n\n\treturn el.getBoundingClientRect();\n}\n","export const getRgb = (colorString?: string | null) => {\n\tif (!colorString) {\n\t\treturn null;\n\t}\n\n\t// @ts-ignore\n\tconst [_1, r, g, b, _2, a] = (colorString!.match(\n\t\t/rgba?\\(([\\d\\.]+), ([\\d\\.]+), ([\\d\\.]+)(, ([\\d\\.]+))?\\)/\n\t)! || []) as string[];\n\n\tconst none = a && parseFloat(a) === 0;\n\n\tif (r && g && b && !none) {\n\t\treturn {\n\t\t\tr: parseInt(r) / 255,\n\t\t\tg: parseInt(g) / 255,\n\t\t\tb: parseInt(b) / 255,\n\t\t\ta: a ? parseFloat(a) : 1\n\t\t};\n\t}\n\treturn null;\n}","export const capitalize = (str: string) => str[0].toUpperCase() + str.substring(1);\n","export const getUrl = (url: string) => {\n\tif (!url) {\n\t\treturn \"\";\n\t}\n\tlet final = url.trim();\n\tif (final.startsWith(\"//\")) {\n\t\tfinal = \"https:\" + final;\n\t}\n\n\tif (final.startsWith(\"/\")) {\n\t\tfinal = \"https://\" + location.host + final;\n\t}\n\n\treturn final;\n};","const LENGTH_REG = /^[0-9]+[a-zA-Z%]+?$/;\n\nexport const isLength = (v: string) => v === \"0\" || LENGTH_REG.test(v);\n","export const toNum = (v: string): number => {\n\t// if (!/px$/.test(v) && v !== '0') return v;\n\tif (!/px$/.test(v) && v !== \"0\") return 0;\n\tconst n = parseFloat(v);\n\t// return !isNaN(n) ? n : v;\n\treturn !isNaN(n) ? n : 0;\n};","import { isLength } from \"./isLength\";\nimport { toNum } from \"./toNum\";\n\nexport const parseValue = (str: string): ParsedBoxShadow => {\n\t// TODO: this is broken for multiple box shadows\n\tif (str.startsWith(\"rgb\")) {\n\t\t// Werid computed style thing that puts the color in the front not back\n\t\tconst colorMatch = str.match(/(rgba?\\(.+?\\))(.+)/);\n\t\tif (colorMatch) {\n\t\t\tstr = (colorMatch[2] + \" \" + colorMatch[1]).trim();\n\t\t}\n\t}\n\n\tconst PARTS_REG = /\\s(?![^(]*\\))/;\n\tconst parts = str.split(PARTS_REG);\n\tconst inset = parts.includes(\"inset\");\n\tconst last = parts.slice(-1)[0];\n\tconst color = !isLength(last) ? last : \"rgba(0, 0, 0, 1)\";\n\n\tconst nums = parts\n\t\t.filter(n => n !== \"inset\")\n\t\t.filter(n => n !== color)\n\t\t.map(toNum);\n\n\tconst [offsetX, offsetY, blurRadius, spreadRadius] = nums;\n\n\treturn {\n\t\tinset,\n\t\toffsetX,\n\t\toffsetY,\n\t\tblurRadius,\n\t\tspreadRadius,\n\t\tcolor\n\t};\n};","export const parseUnits = (str?: string | null): null | Unit => {\n\tif (!str) {\n\t\treturn null;\n\t}\n\tconst match = str.match(/([\\d\\.]+)px/);\n\tconst val = match && match[1];\n\tif (val) {\n\t\treturn {\n\t\t\tunit: \"PIXELS\",\n\t\t\tvalue: parseFloat(val)\n\t\t};\n\t}\n\treturn null;\n};","export const textNodesUnder = (el: Element) => {\n\tlet n: Node | null = null;\n\tconst a: Node[] = [];\n\tconst walk = document.createTreeWalker(\n\t\tel,\n\t\tNodeFilter.SHOW_TEXT,\n\t\tnull,\n\t\tfalse\n\t);\n\n\twhile ((n = walk.nextNode())) {\n\t\ta.push(n);\n\t}\n\n\tif (el.shadowRoot) {\n\t\tconst shadowWalk = document.createTreeWalker(\n\t\t\tel.shadowRoot,\n\t\t\tNodeFilter.SHOW_TEXT,\n\t\t\tnull,\n\t\t\tfalse\n\t\t);\n\n\t\twhile ((n = shadowWalk.nextNode())) {\n\t\t\ta.push(n);\n\t\t}\n\t}\n\n\treturn a;\n}","\nexport const hasChildren = (node: LayerNode): node is ChildrenMixin => node && Array.isArray((node as ChildrenMixin).children);\n","import { hasChildren } from \"./hasChildren\";\n\nexport const traverse = (layer: LayerNode, cb: (layer: LayerNode, parent?: LayerNode | null) => void, parent?: LayerNode | null) => {\n\tif (layer) {\n\t\tcb(layer, parent);\n\t\tif (hasChildren(layer)) {\n\t\t\tlayer.children.forEach(child =>\n\t\t\t\ttraverse(child as LayerNode, cb, layer)\n\t\t\t);\n\t\t}\n\t}\n}\n","export const getParents = (node: Element | Node): Element[] => {\n\tlet el: Element | null =\n\t\tnode instanceof Node && node.nodeType === Node.TEXT_NODE\n\t\t\t? node.parentElement\n\t\t\t: (node as Element);\n\n\tlet parents: Element[] = [];\n\twhile (el && (el = el.parentElement)) {\n\t\tparents.push(el);\n\t}\n\treturn parents;\n}","import { getParents } from \"./getParents\";\n\nexport const getDepth = (node: Element | Node) => {\n\treturn getParents(node).length;\n}\n","import { traverse } from \"./traverse\";\n\nexport const getParent = (root, layer: LayerNode) => {\n\tlet response: LayerNode | null = null;\n\ttry {\n\t\ttraverse(root, child => {\n\t\t\tif (\n\t\t\t\tchild &&\n\t\t\t\t(child as any).children &&\n\t\t\t\t(child as any).children.includes(layer)\n\t\t\t) {\n\t\t\t\tresponse = child;\n\t\t\t\t// Deep traverse short circuit hack\n\t\t\t\tthrow \"DONE\";\n\t\t\t}\n\t\t});\n\t} catch (err) {\n\t\tif (err === \"DONE\") {\n\t\t\t// Do nothing\n\t\t} else {\n\t\t\tconsole.error(err.message);\n\t\t}\n\t}\n\treturn response;\n}","import { traverse } from \"./traverse\";\nimport { getDepth } from \"./getDepth\";\nimport { getParents } from \"./getParents\";\nimport { getBoundingClientRect } from \"./getBoundingClientRect\";\nimport { hasChildren } from \"./hasChildren\";\nimport { getParent } from \"./getParent\";\n\nexport const makeTree = (root, layers) => {\n\tconst refMap = new WeakMap<Element | Node, LayerNode>();\n\tlayers.forEach(layer => {\n\t\tif (layer.ref) {\n\t\t\trefMap.set(layer.ref, layer);\n\t\t}\n\t});\n\n\tlet updated = true;\n\tlet iterations = 0;\n\twhile (updated) {\n\t\tupdated = false;\n\t\tif (iterations++ > 10000) {\n\t\t\tconsole.error(\"Too many tree iterations 1\");\n\t\t\tbreak;\n\t\t}\n\n\t\ttraverse(root, (layer, originalParent) => {\n\t\t\t// const node = layer.ref!;\n\t\t\tconst node = layer.ref;\n\t\t\tlet parentElement: Element | null =\n\t\t\t\t(node && (node as Element).parentElement) || null;\n\t\t\tdo {\n\t\t\t\tif (parentElement === document.body) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (parentElement && parentElement !== document.body) {\n\t\t\t\t\t// Get least common demoninator shared parent and make a group\n\t\t\t\t\tconst parentLayer = refMap.get(parentElement);\n\t\t\t\t\tif (parentLayer === originalParent) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tif (parentLayer && parentLayer !== root) {\n\t\t\t\t\t\tif (hasChildren(parentLayer)) {\n\t\t\t\t\t\t\tif (originalParent) {\n\t\t\t\t\t\t\t\tconst index = (originalParent as any).children.indexOf(layer);\n\t\t\t\t\t\t\t\t(originalParent as any).children.splice(index, 1);\n\t\t\t\t\t\t\t\t(parentLayer.children as Array<any>).push(layer);\n\t\t\t\t\t\t\t\tupdated = true;\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet parentRef = parentLayer.ref;\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tparentRef &&\n\t\t\t\t\t\t\t\tparentRef instanceof Node &&\n\t\t\t\t\t\t\t\tparentRef.nodeType === Node.TEXT_NODE\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tparentRef = parentRef.parentElement as Element;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst overflowHidden =\n\t\t\t\t\t\t\t\tparentRef instanceof Element &&\n\t\t\t\t\t\t\t\tgetComputedStyle(parentRef).overflow !== \"visible\";\n\t\t\t\t\t\t\tconst newParent: LayerNode = {\n\t\t\t\t\t\t\t\ttype: \"FRAME\",\n\t\t\t\t\t\t\t\tclipsContent: !!overflowHidden,\n\t\t\t\t\t\t\t\t// type: 'GROUP',\n\t\t\t\t\t\t\t\tx: parentLayer.x,\n\t\t\t\t\t\t\t\ty: parentLayer.y,\n\t\t\t\t\t\t\t\twidth: parentLayer.width,\n\t\t\t\t\t\t\t\theight: parentLayer.height,\n\t\t\t\t\t\t\t\tref: parentLayer.ref,\n\t\t\t\t\t\t\t\tbackgrounds: [] as any,\n\t\t\t\t\t\t\t\tchildren: [parentLayer, layer] as any[]\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tconst parent = getParent(root, parentLayer);\n\t\t\t\t\t\t\tif (!parent) {\n\t\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t\t\"\\n\\nCANT FIND PARENT\\n\",\n\t\t\t\t\t\t\t\t\tJSON.stringify({ ...parentLayer, ref: null })\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (originalParent) {\n\t\t\t\t\t\t\t\tconst index = (originalParent as any).children.indexOf(layer);\n\t\t\t\t\t\t\t\t(originalParent as any).children.splice(index, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdelete parentLayer.ref;\n\t\t\t\t\t\t\tconst newIndex = (parent as any).children.indexOf(parentLayer);\n\t\t\t\t\t\t\trefMap.set(parentElement, newParent);\n\t\t\t\t\t\t\t(parent as any).children.splice(newIndex, 1, newParent);\n\t\t\t\t\t\t\tupdated = true;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} while (\n\t\t\t\tparentElement &&\n\t\t\t\t(parentElement = parentElement.parentElement)\n\t\t\t);\n\t\t});\n\t}\n\n\t// Collect tree of depeest common parents and make groups\n\tlet secondUpdate = true;\n\tlet secondIterations = 0;\n\twhile (secondUpdate) {\n\t\tif (secondIterations++ > 10000) {\n\t\t\tconsole.error(\"Too many tree iterations 2\");\n\t\t\tbreak;\n\t\t}\n\t\tsecondUpdate = false;\n\n\t\ttraverse(root, (layer, _) => {\n\t\t\tif (secondUpdate) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (layer.type === \"FRAME\") {\n\t\t\t\t// Final all child elements with layers, and add groups around  any with a shared parent not shared by another\n\t\t\t\tconst ref = layer.ref as Element;\n\t\t\t\tif (layer.children && layer.children.length > 2) {\n\t\t\t\t\tconst childRefs =\n\t\t\t\t\t\tlayer.children &&\n\t\t\t\t\t\t(layer.children as LayerNode[]).map(child => child.ref!);\n\n\t\t\t\t\tlet lowestCommonDenominator = layer.ref!;\n\t\t\t\t\tlet lowestCommonDenominatorDepth = getDepth(\n\t\t\t\t\t\tlowestCommonDenominator\n\t\t\t\t\t);\n\n\t\t\t\t\t// Find lowest common demoninator with greatest depth\n\t\t\t\t\tfor (const childRef of childRefs) {\n\t\t\t\t\t\tconst otherChildRefs = childRefs.filter(\n\t\t\t\t\t\t\titem => item !== childRef\n\t\t\t\t\t\t);\n\t\t\t\t\t\tconst childParents = getParents(childRef);\n\t\t\t\t\t\tfor (const otherChildRef of otherChildRefs) {\n\t\t\t\t\t\t\tconst otherParents = getParents(otherChildRef);\n\t\t\t\t\t\t\tfor (const parent of otherParents) {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tchildParents.includes(parent) &&\n\t\t\t\t\t\t\t\t\tlayer.ref!.contains(parent)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tconst depth = getDepth(parent);\n\t\t\t\t\t\t\t\t\tif (depth > lowestCommonDenominatorDepth) {\n\t\t\t\t\t\t\t\t\t\tlowestCommonDenominator = parent;\n\t\t\t\t\t\t\t\t\t\tlowestCommonDenominatorDepth = depth;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tlowestCommonDenominator &&\n\t\t\t\t\t\tlowestCommonDenominator !== layer.ref\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Make a group around all children elements\n\t\t\t\t\t\tconst newChildren = layer.children!.filter((item: any) =>\n\t\t\t\t\t\t\tlowestCommonDenominator.contains(item.ref)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (newChildren.length !== layer.children.length) {\n\t\t\t\t\t\t\tconst lcdRect = getBoundingClientRect(\n\t\t\t\t\t\t\t\tlowestCommonDenominator as Element\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tconst overflowHidden =\n\t\t\t\t\t\t\t\tlowestCommonDenominator instanceof Element &&\n\t\t\t\t\t\t\t\tgetComputedStyle(lowestCommonDenominator).overflow !==\n\t\t\t\t\t\t\t\t\"visible\";\n\n\t\t\t\t\t\t\tconst newParent: LayerNode = {\n\t\t\t\t\t\t\t\ttype: \"FRAME\",\n\t\t\t\t\t\t\t\tclipsContent: !!overflowHidden,\n\t\t\t\t\t\t\t\tref: lowestCommonDenominator as Element,\n\t\t\t\t\t\t\t\tx: lcdRect.left,\n\t\t\t\t\t\t\t\ty: lcdRect.top,\n\t\t\t\t\t\t\t\twidth: lcdRect.width,\n\t\t\t\t\t\t\t\theight: lcdRect.height,\n\t\t\t\t\t\t\t\tbackgrounds: [] as any,\n\t\t\t\t\t\t\t\tchildren: newChildren as any\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\trefMap.set(lowestCommonDenominator, ref);\n\t\t\t\t\t\t\tlet firstIndex = layer.children.length - 1;\n\t\t\t\t\t\t\tfor (const child of newChildren) {\n\t\t\t\t\t\t\t\tconst childIndex = layer.children.indexOf(child as any);\n\t\t\t\t\t\t\t\tif (childIndex > -1 && childIndex < firstIndex) {\n\t\t\t\t\t\t\t\t\tfirstIndex = childIndex;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t(layer.children as any).splice(firstIndex, 0, newParent);\n\t\t\t\t\t\t\tfor (const child of newChildren) {\n\t\t\t\t\t\t\t\tconst index = layer.children.indexOf(child);\n\t\t\t\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\t\t\t\t(layer.children as any).splice(index, 1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tsecondUpdate = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t// Update all positions\n\ttraverse(root, layer => {\n\t\tif (layer.type === \"FRAME\" || layer.type === \"GROUP\") {\n\t\t\tconst { x, y } = layer;\n\t\t\tif (x || y) {\n\t\t\t\ttraverse(layer, child => {\n\t\t\t\t\tif (child === layer) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tchild.x = child.x! - x!;\n\t\t\t\t\tchild.y = child.y! - y!;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\treturn { root, layers };\n}","export const setData = (node: any, key: string, value: string) => {\n\tif (!(node as any).data) {\n\t\t(node as any).data = {};\n\t}\n\t(node as any).data[key] = value;\n}","import { traverse } from \"./traverse\";\nimport { setData } from \"./setData\";\n\nexport const addConstraints = (root, layers: LayerNode[]) => {\n\n\tlayers.forEach(layer => {\n\t\ttraverse(layer, child => {\n\t\t\tif (child.type === \"SVG\") {\n\t\t\t\tchild.constraints = {\n\t\t\t\t\thorizontal: \"CENTER\",\n\t\t\t\t\tvertical: \"MIN\"\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tconst ref = child.ref;\n\t\t\t\tif (ref) {\n\t\t\t\t\tconst el = ref instanceof HTMLElement ? ref : ref.parentElement;\n\t\t\t\t\tconst parent = el && el.parentElement;\n\t\t\t\t\tif (el && parent) {\n\t\t\t\t\t\tconst currentDisplay = el.style.display;\n\t\t\t\t\t\tel.style.setProperty('display', 'none', '!important')\n\t\t\t\t\t\tlet computed = getComputedStyle(el);\n\t\t\t\t\t\tconst hasFixedWidth = computed.width && computed.width.trim().endsWith('px')\n\t\t\t\t\t\tconst hasFixedHeight = computed.height && computed.height.trim().endsWith('px')\n\t\t\t\t\t\tel.style.display = currentDisplay;\n\t\t\t\t\t\tconst parentStyle = getComputedStyle(parent);\n\t\t\t\t\t\tlet hasAutoMarginLeft = computed.marginLeft === \"auto\";\n\t\t\t\t\t\tlet hasAutoMarginRight = computed.marginRight === \"auto\";\n\t\t\t\t\t\tlet hasAutoMarginTop = computed.marginTop === \"auto\";\n\t\t\t\t\t\tlet hasAutoMarginBottom = computed.marginBottom === \"auto\";\n\n\t\t\t\t\t\tcomputed = getComputedStyle(el);\n\n\t\t\t\t\t\tif ([\"absolute\", \"fixed\"].includes(computed.position!)) {\n\t\t\t\t\t\t\tsetData(child, 'position', computed.position!)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (hasFixedHeight) {\n\t\t\t\t\t\t\tsetData(child, 'heightType', 'fixed')\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (hasFixedWidth) {\n\t\t\t\t\t\t\tsetData(child, 'widthType', 'fixed')\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst isInline =\n\t\t\t\t\t\t\tcomputed.display && computed.display.includes(\"inline\");\n\n\t\t\t\t\t\tif (isInline) {\n\t\t\t\t\t\t\tconst parentTextAlign = parentStyle.textAlign;\n\t\t\t\t\t\t\tif (parentTextAlign === \"center\") {\n\t\t\t\t\t\t\t\thasAutoMarginLeft = true;\n\t\t\t\t\t\t\t\thasAutoMarginRight = true;\n\t\t\t\t\t\t\t} else if (parentTextAlign === \"right\") {\n\t\t\t\t\t\t\t\thasAutoMarginLeft = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (computed.verticalAlign === \"middle\") {\n\t\t\t\t\t\t\t\thasAutoMarginTop = true;\n\t\t\t\t\t\t\t\thasAutoMarginBottom = true;\n\t\t\t\t\t\t\t} else if (computed.verticalAlign === \"bottom\") {\n\t\t\t\t\t\t\t\thasAutoMarginTop = true;\n\t\t\t\t\t\t\t\thasAutoMarginBottom = false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetData(child, 'widthType', 'shrink')\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst parentJustifyContent =\n\t\t\t\t\t\t\tparentStyle.display === \"flex\" &&\n\t\t\t\t\t\t\t((parentStyle.flexDirection === \"row\" &&\n\t\t\t\t\t\t\t\tparentStyle.justifyContent) ||\n\t\t\t\t\t\t\t\t(parentStyle.flexDirection === \"column\" &&\n\t\t\t\t\t\t\t\t\tparentStyle.alignItems));\n\n\t\t\t\t\t\tif (parentJustifyContent === \"center\") {\n\t\t\t\t\t\t\thasAutoMarginLeft = true;\n\t\t\t\t\t\t\thasAutoMarginRight = true;\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tparentJustifyContent &&\n\t\t\t\t\t\t\t(parentJustifyContent.includes(\"end\") ||\n\t\t\t\t\t\t\t\tparentJustifyContent.includes(\"right\"))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\thasAutoMarginLeft = true;\n\t\t\t\t\t\t\thasAutoMarginRight = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst parentAlignItems =\n\t\t\t\t\t\t\tparentStyle.display === \"flex\" &&\n\t\t\t\t\t\t\t((parentStyle.flexDirection === \"column\" &&\n\t\t\t\t\t\t\t\tparentStyle.justifyContent) ||\n\t\t\t\t\t\t\t\t(parentStyle.flexDirection === \"row\" &&\n\t\t\t\t\t\t\t\t\tparentStyle.alignItems));\n\t\t\t\t\t\tif (parentAlignItems === \"center\") {\n\t\t\t\t\t\t\thasAutoMarginTop = true;\n\t\t\t\t\t\t\thasAutoMarginBottom = true;\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\tparentAlignItems &&\n\t\t\t\t\t\t\t(parentAlignItems.includes(\"end\") ||\n\t\t\t\t\t\t\t\tparentAlignItems.includes(\"bottom\"))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\thasAutoMarginTop = true;\n\t\t\t\t\t\t\thasAutoMarginBottom = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (child.type === \"TEXT\") {\n\t\t\t\t\t\t\tif (computed.textAlign === \"center\") {\n\t\t\t\t\t\t\t\thasAutoMarginLeft = true;\n\t\t\t\t\t\t\t\thasAutoMarginRight = true;\n\t\t\t\t\t\t\t} else if (computed.textAlign === \"right\") {\n\t\t\t\t\t\t\t\thasAutoMarginLeft = true;\n\t\t\t\t\t\t\t\thasAutoMarginRight = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tchild.constraints = {\n\t\t\t\t\t\t\thorizontal:\n\t\t\t\t\t\t\t\thasAutoMarginLeft && hasAutoMarginRight\n\t\t\t\t\t\t\t\t\t? \"CENTER\"\n\t\t\t\t\t\t\t\t\t: hasAutoMarginLeft\n\t\t\t\t\t\t\t\t\t\t? \"MAX\"\n\t\t\t\t\t\t\t\t\t\t: \"SCALE\",\n\t\t\t\t\t\t\tvertical:\n\t\t\t\t\t\t\t\thasAutoMarginBottom && hasAutoMarginTop\n\t\t\t\t\t\t\t\t\t? \"CENTER\"\n\t\t\t\t\t\t\t\t\t: hasAutoMarginTop\n\t\t\t\t\t\t\t\t\t\t? \"MAX\"\n\t\t\t\t\t\t\t\t\t\t: \"MIN\"\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tchild.constraints = {\n\t\t\t\t\t\thorizontal: \"SCALE\",\n\t\t\t\t\t\tvertical: \"MIN\"\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n\n\treturn { root, layers };\n}","import { traverse } from \"./traverse\";\n\nexport const removeRefs = (root, layers: LayerNode[]) => {\n\tlayers.concat([root]).forEach(layer => {\n\t\ttraverse(layer, child => {\n\t\t\tdelete child.ref;\n\t\t});\n\t});\n\n\treturn { root, layers };\n}","import { isHidden } from \"./functions/isHidden\";\nimport { getAppliedComputedStyles } from \"./functions/getAppliedComputedStyles\";\nimport { size } from \"./functions/size\";\nimport { getBoundingClientRect } from \"./functions/getBoundingClientRect\";\nimport { getRgb } from \"./functions/getRgb\";\nimport { capitalize } from \"./functions/capitalize\";\nimport { getUrl } from \"./functions/getUrl\";\nimport { parseValue } from \"./functions/parseValue\";\nimport { parseUnits } from \"./functions/parseUnits\";\nimport { textNodesUnder } from \"./functions/textNodesUnder\";\nimport { makeTree } from \"./functions/makeTree\";\nimport { addConstraints } from \"./functions/addConstraints\";\nimport { removeRefs } from \"./functions/removeRefs\";\n\n// export const selectorToFigma(selector: string = \"body\", useFrames = false, time = false) {\n\n// }\n\n// export const nodeToFigma(element: HTMLElement, useFrames = false, time = false) {\n\n// }\n\n\nexport const htmlToFigma = (selector: HTMLElement | string = \"body\", useFrames = false, time = false) => {\n\n\tif (time) {\n\t\tconsole.time(\"Parse dom\");\n\t}\n\n\tlet layers: LayerNode[] = [];\n\tconst el = selector instanceof HTMLElement ? selector : document.querySelector(selector || \"body\");\n\n\tif (el) {\n\t\t// Process SVG <use> elements\n\t\tfor (const use of Array.from(el.querySelectorAll(\"use\"))) {\n\t\t\ttry {\n\t\t\t\tconst symbolSelector = use.href.baseVal;\n\t\t\t\tconst symbol: SVGSymbolElement | null = document.querySelector(\n\t\t\t\t\tsymbolSelector\n\t\t\t\t);\n\t\t\t\tif (symbol) {\n\t\t\t\t\tuse.outerHTML = symbol.innerHTML;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.warn(\"Error querying <use> tag href\", err);\n\t\t\t}\n\t\t}\n\n\t\tlet els = Array.from(el.querySelectorAll(\"*\"));\n\n\t\tif (el.shadowRoot) {\n\t\t\tconst shadowEls = Array.from(el.shadowRoot.querySelectorAll(\"*\"));\n\n\t\t\tels = [...shadowEls, ...els];\n\t\t\tels = els.filter(e => ![\"EXPORT-TO-FIGMA\", \"SLOT\"].includes(e.tagName))\n\t\t}\n\n\t\tif (els) {\n\t\t\t// Include shadow dom\n\t\t\tfor (const el of els) {\n\t\t\t\tif (el.shadowRoot) {\n\t\t\t\t\tconst shadowEls = Array.from(el.shadowRoot.querySelectorAll('*'));\n\t\t\t\t\tels.push(...shadowEls);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tArray.from(els).forEach(el => {\n\t\t\t\tif (isHidden(el)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (el instanceof SVGSVGElement) {\n\t\t\t\t\tconst rect = el.getBoundingClientRect();\n\n\t\t\t\t\t// TODO: pull in CSS/computed styles\n\t\t\t\t\t// TODO: may need to pull in layer styles too like shadow, bg color, etc\n\t\t\t\t\tlayers.push({\n\t\t\t\t\t\ttype: \"SVG\",\n\t\t\t\t\t\tref: el,\n\t\t\t\t\t\tsvg: el.outerHTML,\n\t\t\t\t\t\tx: Math.round(rect.left),\n\t\t\t\t\t\ty: Math.round(rect.top),\n\t\t\t\t\t\twidth: Math.round(rect.width),\n\t\t\t\t\t\theight: Math.round(rect.height)\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Sub SVG Eleemnt\n\t\t\t\telse if (el instanceof SVGElement) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tel.parentElement &&\n\t\t\t\t\tel.parentElement instanceof HTMLPictureElement\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst appliedStyles = getAppliedComputedStyles(el);\n\t\t\t\tconst computedStyle = getComputedStyle(el);\n\n\t\t\t\tif (\n\t\t\t\t\t(size(appliedStyles) ||\n\t\t\t\t\t\tel instanceof HTMLImageElement ||\n\t\t\t\t\t\tel instanceof HTMLPictureElement ||\n\t\t\t\t\t\tel instanceof HTMLVideoElement) &&\n\t\t\t\t\tcomputedStyle.display !== \"none\"\n\t\t\t\t) {\n\t\t\t\t\tconst rect = getBoundingClientRect(el);\n\n\t\t\t\t\tif (rect.width >= 1 && rect.height >= 1) {\n\t\t\t\t\t\tconst fills: Paint[] = [];\n\n\t\t\t\t\t\tlet color = getRgb(computedStyle.backgroundColor);\n\n\n\t\t\t\t\t\tif (computedStyle.background.includes(\"gradient\")) {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tvar match = [...computedStyle.background.matchAll(/rgba?\\((\\d{1,3}), ?(\\d{1,3}), ?(\\d{1,3})\\)?(?:, ?(\\d(?:\\.\\d?))\\))?/g)];\n\t\t\t\t\t\t\tcolor = getRgb(match[1][0])\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO: Add support for gradients\n\n\t\t\t\t\t\tif (color) {\n\t\t\t\t\t\t\tfills.push({\n\t\t\t\t\t\t\t\ttype: \"SOLID\",\n\t\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\t\tr: color.r,\n\t\t\t\t\t\t\t\t\tg: color.g,\n\t\t\t\t\t\t\t\t\tb: color.b\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\topacity: color.a || 1\n\t\t\t\t\t\t\t} as SolidPaint);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst rectNode = {\n\t\t\t\t\t\t\ttype: \"RECTANGLE\",\n\t\t\t\t\t\t\tref: el,\n\t\t\t\t\t\t\tx: Math.round(rect.left),\n\t\t\t\t\t\t\ty: Math.round(rect.top),\n\t\t\t\t\t\t\twidth: Math.round(rect.width),\n\t\t\t\t\t\t\theight: Math.round(rect.height),\n\t\t\t\t\t\t\tfills: fills as any\n\t\t\t\t\t\t} as WithRef<RectangleNode>;\n\n\t\t\t\t\t\tif (computedStyle.border) {\n\t\t\t\t\t\t\tconst parsed = computedStyle.border.match(\n\t\t\t\t\t\t\t\t/^([\\d\\.]+)px\\s*(\\w+)\\s*(.*)$/\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (parsed) {\n\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\tlet [_, width, type, color] = parsed;\n\t\t\t\t\t\t\t\tif (width && width !== \"0\" && type !== \"none\" && color) {\n\t\t\t\t\t\t\t\t\tconst rgb = getRgb(color);\n\t\t\t\t\t\t\t\t\tif (rgb) {\n\t\t\t\t\t\t\t\t\t\trectNode.strokes = [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"SOLID\",\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: { r: rgb.r, b: rgb.b, g: rgb.g },\n\t\t\t\t\t\t\t\t\t\t\t\topacity: rgb.a || 1\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t\trectNode.strokeWeight = Math.round(parseFloat(width));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!rectNode.strokes) {\n\t\t\t\t\t\t\tconst directions = [\"top\", \"left\", \"right\", \"bottom\"];\n\t\t\t\t\t\t\tfor (const dir of directions) {\n\t\t\t\t\t\t\t\tconst computed = computedStyle[(\"border\" + capitalize(dir)) as any];\n\t\t\t\t\t\t\t\tif (computed) {\n\t\t\t\t\t\t\t\t\tconst parsed = computed.match(/^([\\d\\.]+)px\\s*(\\w+)\\s*(.*)$/);\n\t\t\t\t\t\t\t\t\tif (parsed) {\n\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\tlet [_match, borderWidth, type, color] = parsed;\n\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\tborderWidth &&\n\t\t\t\t\t\t\t\t\t\t\tborderWidth !== \"0\" &&\n\t\t\t\t\t\t\t\t\t\t\ttype !== \"none\" &&\n\t\t\t\t\t\t\t\t\t\t\tcolor\n\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\tconst rgb = getRgb(color);\n\t\t\t\t\t\t\t\t\t\t\tif (rgb) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst width = [\"top\", \"bottom\"].includes(dir)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? rect.width\n\t\t\t\t\t\t\t\t\t\t\t\t\t: parseFloat(borderWidth);\n\t\t\t\t\t\t\t\t\t\t\t\tconst height = [\"left\", \"right\"].includes(dir)\n\t\t\t\t\t\t\t\t\t\t\t\t\t? rect.height\n\t\t\t\t\t\t\t\t\t\t\t\t\t: parseFloat(borderWidth);\n\t\t\t\t\t\t\t\t\t\t\t\tlayers.push({\n\t\t\t\t\t\t\t\t\t\t\t\t\tref: el,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"RECTANGLE\",\n\t\t\t\t\t\t\t\t\t\t\t\t\tx:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdir === \"left\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? rect.left - width\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dir === \"right\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? rect.right\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: rect.left,\n\t\t\t\t\t\t\t\t\t\t\t\t\ty:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdir === \"top\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? rect.top - height\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dir === \"bottom\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? rect.bottom\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: rect.top,\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth,\n\t\t\t\t\t\t\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\t\t\t\t\t\t\tfills: [\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"SOLID\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: { r: rgb.r, b: rgb.b, g: rgb.g },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topacity: rgb.a || 1\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} as SolidPaint\n\t\t\t\t\t\t\t\t\t\t\t\t\t] as any\n\t\t\t\t\t\t\t\t\t\t\t\t} as WithRef<RectangleNode>);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (computedStyle.backgroundImage && computedStyle.backgroundImage !== \"none\") {\n\t\t\t\t\t\t\tconst urlMatch = computedStyle.backgroundImage.match(\n\t\t\t\t\t\t\t\t/url\\(['\"]?(.*?)['\"]?\\)/\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst url = urlMatch && urlMatch[1];\n\t\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\t\tfills.push({\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\ttype: \"IMAGE\",\n\t\t\t\t\t\t\t\t\t// TODO: backround size, position\n\t\t\t\t\t\t\t\t\tscaleMode: computedStyle.backgroundSize === \"contain\" ? \"FIT\" : \"FILL\",\n\t\t\t\t\t\t\t\t\timageHash: null\n\t\t\t\t\t\t\t\t} as ImagePaint);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (el instanceof SVGSVGElement) {\n\t\t\t\t\t\t\tconst url = `data:image/svg+xml,${encodeURIComponent(\n\t\t\t\t\t\t\t\tel.outerHTML.replace(/\\s+/g, \" \")\n\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\t\tfills.push({\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\ttype: \"IMAGE\",\n\t\t\t\t\t\t\t\t\t// TODO: object fit, position\n\t\t\t\t\t\t\t\t\tscaleMode: \"FILL\",\n\t\t\t\t\t\t\t\t\timageHash: null\n\t\t\t\t\t\t\t\t} as ImagePaint);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (el instanceof HTMLImageElement) {\n\t\t\t\t\t\t\tconst url = el.src;\n\t\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\t\tfills.push({\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\ttype: \"IMAGE\",\n\t\t\t\t\t\t\t\t\t// TODO: object fit, position\n\t\t\t\t\t\t\t\t\tscaleMode:\n\t\t\t\t\t\t\t\t\t\tcomputedStyle.objectFit === \"contain\" ? \"FIT\" : \"FILL\",\n\t\t\t\t\t\t\t\t\timageHash: null\n\t\t\t\t\t\t\t\t} as ImagePaint);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (el instanceof HTMLPictureElement) {\n\t\t\t\t\t\t\tconst firstSource = el.querySelector(\"source\");\n\t\t\t\t\t\t\tif (firstSource) {\n\t\t\t\t\t\t\t\tconst src = getUrl(firstSource.srcset.split(/[,\\s]+/g)[0]);\n\t\t\t\t\t\t\t\t// TODO: if not absolute\n\t\t\t\t\t\t\t\tif (src) {\n\t\t\t\t\t\t\t\t\tfills.push({\n\t\t\t\t\t\t\t\t\t\turl: src,\n\t\t\t\t\t\t\t\t\t\ttype: \"IMAGE\",\n\t\t\t\t\t\t\t\t\t\t// TODO: object fit, position\n\t\t\t\t\t\t\t\t\t\tscaleMode:\n\t\t\t\t\t\t\t\t\t\t\tcomputedStyle.objectFit === \"contain\" ? \"FIT\" : \"FILL\",\n\t\t\t\t\t\t\t\t\t\timageHash: null\n\t\t\t\t\t\t\t\t\t} as ImagePaint);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (el instanceof HTMLVideoElement) {\n\t\t\t\t\t\t\tconst url = el.poster;\n\t\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\t\tfills.push({\n\t\t\t\t\t\t\t\t\turl,\n\t\t\t\t\t\t\t\t\ttype: \"IMAGE\",\n\t\t\t\t\t\t\t\t\t// TODO: object fit, position\n\t\t\t\t\t\t\t\t\tscaleMode:\n\t\t\t\t\t\t\t\t\t\tcomputedStyle.objectFit === \"contain\" ? \"FIT\" : \"FILL\",\n\t\t\t\t\t\t\t\t\timageHash: null\n\t\t\t\t\t\t\t\t} as ImagePaint);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (computedStyle.boxShadow && computedStyle.boxShadow !== \"none\") {\n\t\t\t\t\t\t\tconst parsed = parseValue(computedStyle.boxShadow);\n\t\t\t\t\t\t\tconst color = getRgb(parsed.color);\n\t\t\t\t\t\t\tif (color) {\n\t\t\t\t\t\t\t\trectNode.effects = [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tcolor,\n\t\t\t\t\t\t\t\t\t\ttype: \"DROP_SHADOW\",\n\t\t\t\t\t\t\t\t\t\tradius: parsed.blurRadius,\n\t\t\t\t\t\t\t\t\t\tblendMode: \"NORMAL\",\n\t\t\t\t\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\t\t\t\t\toffset: {\n\t\t\t\t\t\t\t\t\t\t\tx: parsed.offsetX,\n\t\t\t\t\t\t\t\t\t\t\ty: parsed.offsetY\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} as ShadowEffect\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst borderTopLeftRadius = parseUnits(\n\t\t\t\t\t\t\tcomputedStyle.borderTopLeftRadius\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (borderTopLeftRadius) {\n\t\t\t\t\t\t\trectNode.topLeftRadius = borderTopLeftRadius.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst borderTopRightRadius = parseUnits(\n\t\t\t\t\t\t\tcomputedStyle.borderTopRightRadius\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (borderTopRightRadius) {\n\t\t\t\t\t\t\trectNode.topRightRadius = borderTopRightRadius.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst borderBottomRightRadius = parseUnits(\n\t\t\t\t\t\t\tcomputedStyle.borderBottomRightRadius\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (borderBottomRightRadius) {\n\t\t\t\t\t\t\trectNode.bottomRightRadius = borderBottomRightRadius.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst borderBottomLeftRadius = parseUnits(\n\t\t\t\t\t\t\tcomputedStyle.borderBottomLeftRadius\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (borderBottomLeftRadius) {\n\t\t\t\t\t\t\trectNode.bottomLeftRadius = borderBottomLeftRadius.value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlayers.push(rectNode);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst textNodes = textNodesUnder(el);\n\n\t\tconst fastClone = (data: any) => JSON.parse(JSON.stringify(data));\n\n\t\tfor (const node of textNodes) {\n\t\t\tif (node.textContent && node.textContent.trim().length) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst parent = node.assignedSlot ? node.assignedSlot.parentElement : node.parentElement;\n\t\t\t\tif (parent) {\n\t\t\t\t\tif (isHidden(parent)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tconst computedStyles = getComputedStyle(parent);\n\t\t\t\t\tconst range = document.createRange();\n\t\t\t\t\trange.selectNode(node);\n\t\t\t\t\tconst rect = fastClone(range.getBoundingClientRect());\n\t\t\t\t\tconst lineHeight = parseUnits(computedStyles.lineHeight);\n\t\t\t\t\trange.detach();\n\t\t\t\t\tif (lineHeight && rect.height < lineHeight.value) {\n\t\t\t\t\t\tconst delta = lineHeight.value - rect.height;\n\t\t\t\t\t\trect.top -= delta / 2;\n\t\t\t\t\t\trect.height = lineHeight.value;\n\t\t\t\t\t}\n\t\t\t\t\tif (rect.height < 1 || rect.width < 1) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst textNode = {\n\t\t\t\t\t\tx: Math.round(rect.left),\n\t\t\t\t\t\tref: node,\n\t\t\t\t\t\ty: Math.round(rect.top),\n\t\t\t\t\t\twidth: Math.round(rect.width),\n\t\t\t\t\t\theight: Math.round(rect.height),\n\t\t\t\t\t\ttype: \"TEXT\",\n\t\t\t\t\t\tcharacters: node.textContent.trim().replace(/\\s+/g, \" \") || \"\"\n\t\t\t\t\t} as WithRef<TextNode>;\n\n\t\t\t\t\tconst fills: SolidPaint[] = [];\n\t\t\t\t\tconst rgb = getRgb(computedStyles.color);\n\n\t\t\t\t\tif (rgb) {\n\t\t\t\t\t\tfills.push({\n\t\t\t\t\t\t\ttype: \"SOLID\",\n\t\t\t\t\t\t\tcolor: {\n\t\t\t\t\t\t\t\tr: rgb.r,\n\t\t\t\t\t\t\t\tg: rgb.g,\n\t\t\t\t\t\t\t\tb: rgb.b\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\topacity: rgb.a || 1\n\t\t\t\t\t\t} as SolidPaint);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (fills.length) {\n\t\t\t\t\t\ttextNode.fills = fills;\n\t\t\t\t\t}\n\t\t\t\t\tconst letterSpacing = parseUnits(computedStyles.letterSpacing);\n\t\t\t\t\tif (letterSpacing) {\n\t\t\t\t\t\ttextNode.letterSpacing = letterSpacing;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lineHeight) {\n\t\t\t\t\t\ttextNode.lineHeight = lineHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst { textTransform } = computedStyles;\n\t\t\t\t\tswitch (textTransform) {\n\t\t\t\t\t\tcase \"uppercase\": {\n\t\t\t\t\t\t\ttextNode.textCase = \"UPPER\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase \"lowercase\": {\n\t\t\t\t\t\t\ttextNode.textCase = \"LOWER\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcase \"capitalize\": {\n\t\t\t\t\t\t\ttextNode.textCase = \"TITLE\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst fontSize = parseUnits(computedStyles.fontSize);\n\t\t\t\t\tif (fontSize) {\n\t\t\t\t\t\ttextNode.fontSize = Math.round(fontSize.value);\n\t\t\t\t\t}\n\t\t\t\t\tif (computedStyles.fontFamily) {\n\t\t\t\t\t\t// const font = computedStyles.fontFamily.split(/\\s*,\\s*/);\n\t\t\t\t\t\t(textNode as any).fontFamily = computedStyles.fontFamily;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (computedStyles.textDecoration) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tcomputedStyles.textDecoration === \"underline\" ||\n\t\t\t\t\t\t\tcomputedStyles.textDecoration === \"strikethrough\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttextNode.textDecoration = computedStyles.textDecoration.toUpperCase() as any;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (computedStyles.textAlign) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t[\"left\", \"center\", \"right\", \"justified\"].includes(\n\t\t\t\t\t\t\t\tcomputedStyles.textAlign\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttextNode.textAlignHorizontal = computedStyles.textAlign.toUpperCase() as any;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlayers.push(textNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst computedStyle = getComputedStyle(el);\n\n\tlet backgrounds: Paint[] = [];\n\n\tconst rgb = getRgb(computedStyle.backgroundColor)\n\tif (rgb) {\n\t\tdelete rgb.a\n\n\t\tbackgrounds = [{\n\t\t\ttype: \"SOLID\",\n\t\t\tcolor: rgb,\n\t\t\tvisible: true,\n\t\t\topacity: Number(computedStyle.opacity)\n\t\t}]\n\t}\n\n\t// TODO: send frame: { children: []}\n\tlet root = {\n\t\ttype: \"FRAME\",\n\t\t// @ts-ignore\n\t\twidth: el ? Math.round(el.offsetWidth) : Math.round(window.innerWidth),\n\t\t// @ts-ignore\n\t\theight: el ? Math.round(el.offsetHeight) : Math.round(window.innerHeight),\n\t\tx: 0,\n\t\ty: 0,\n\t\tref: el,\n\t\tbackgrounds\n\t} as WithRef<FrameNode>;\n\n\tlayers.unshift(root);\n\n\t// TODO: arg can be passed in\n\tconst MAKE_TREE = useFrames;\n\n\tlet result;\n\n\tif (MAKE_TREE) {\n\t\t(root as any).children = layers.slice(1);\n\n\t\tresult = makeTree(root, layers);\n\t\troot = result.root;\n\t\tlayers = result.layers;\n\n\t\tresult = addConstraints(root, layers);\n\t\troot = result.root;\n\t\tlayers = result.layers;\n\n\t\tresult = removeRefs(root, layers);\n\t\troot = result.root;\n\t\tlayers = result.layers;\n\n\t\tif (time) {\n\t\t\tconsole.info(\"\\n\");\n\t\t\tconsole.timeEnd(\"Parse dom\");\n\t\t}\n\n\t\treturn { \"layers\": [root] };\n\t}\n\n\tresult = removeRefs(root, layers);\n\troot = result.root;\n\tlayers = result.layers;\n\n\tif (time) {\n\t\tconsole.info(\"\\n\");\n\t\tconsole.timeEnd(\"Parse dom\");\n\t}\n\n\tif (layers.length === 1 && layers[0].width === 0 && layers[0].height === 0) {\n\t\treturn false\n\t}\n\n\treturn { \"layers\": layers };\n}\n","import { Component, ComponentInterface, Host, h, Element, Listen, Prop, Method } from '@stencil/core';\nimport { htmlToFigma } from './lib/html-to-figma';\n\n@Component({\n  tag: 'export-to-figma',\n  shadow: true,\n})\nexport class ExportToFigma implements ComponentInterface {\n  @Element() el: HTMLElement;\n  @Prop() noKey: boolean = false;\n  @Prop({ mutable: true }) element: HTMLElement;\n\n  componentWillLoad() {\n    if (!this.element) {\n      // @ts-ignore\n      this.element = this.el.parentNode && this.el.parentNode.constructor.name === 'ShadowRoot' ? this.el.parentNode.host : this.el.parentElement;\n    }\n  }\n\n  @Listen('keydown', { target: 'window' })\n  handleSaveComponents(e: KeyboardEvent) {\n    if (!this.noKey) {\n      if (e.key === 's' && e.shiftKey && e.metaKey && this.element.matches(':hover')) {\n        e.preventDefault();\n        this.get();\n      }\n    }\n  }\n\n  @Method()\n  async export() {\n    return await this.get();\n  }\n\n  async get() {\n    const layers = await htmlToFigma(this.element);\n\n    function download(exportObj, exportName) {\n      var dataStr = 'data:text/json;charset=utf-8,' + encodeURIComponent(JSON.stringify(exportObj));\n      var downloadAnchorNode = document.createElement('a');\n      downloadAnchorNode.setAttribute('href', dataStr);\n      downloadAnchorNode.setAttribute('download', exportName + '.json');\n      document.body.appendChild(downloadAnchorNode); // required for firefox\n      downloadAnchorNode.click();\n      downloadAnchorNode.remove();\n    }\n\n    if (layers) {\n      download(layers, `${this.element.tagName.toLowerCase()}`);\n    }\n  }\n\n  render() {\n    return <Host style={{ display: 'none' }} />;\n  }\n}\n"],"version":3}